/* =========
   Telegram theme tokens + fallbacks
   ========= */
*, *::before, *::after { box-sizing: border-box; }
 select, textarea {
  width: 100%;
  max-width: 100%;
}
@media (max-width: 520px) {
  .input, input, select, textarea {
    font-size: 16px;
  }
}
/* твой общий инпут */
.input{
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* iOS / Safari: дата и время любят вылезать */
input.input[type="date"],
input.input[type="time"]{
  width: 100%;
  max-width: 100%;
  min-width: 0;
  display: block;
}


/* iOS fix: “обрубает” вылезание нативного date/time */
.iosField{
  width: 100%;
  max-width: 100%;
  overflow: hidden;
  border-radius: 14px; /* подгони под твой input */
}

/* важно: сам input тоже ограничиваем */
.iosField > .input{
  width: 100%;
  max-width: 100%;
  min-width: 0;
}

/* доп. страховка от горизонтального скролла в Sheet */
/* иногда помогает именно на iOS (не ломает пикер) */
input.input[type="date"]::-webkit-date-and-time-value,
input.input[type="time"]::-webkit-date-and-time-value{
  text-align: left;
}
:root{
  /* Base tg theme vars */
  --tg-bg: var(--tg-theme-bg-color, #ffffff);
  --tg-text: var(--tg-theme-text-color, #111111);
  --tg-hint: var(--tg-theme-hint-color, #6b7280);
  --tg-link: var(--tg-theme-link-color, #2563eb);
  --tg-btn: var(--tg-theme-button-color, #2563eb);
  --tg-btn-text: var(--tg-theme-button-text-color, #ffffff);

  /* Optional tg vars (often present) */
  --tg-secondary-bg: var(--tg-theme-secondary-bg-color, #f3f4f6);
  --tg-section-bg: var(--tg-theme-section-bg-color, var(--tg-secondary-bg));

  /* Derived UI tokens */
  --card-bg: var(--tg-section-bg);
  --border: color-mix(in srgb, var(--tg-text) 14%, transparent);
  --muted-bg: color-mix(in srgb, var(--tg-text) 7%, transparent);
  --shadow: 0 10px 22px rgba(0,0,0,.06);

  /* Spacing + radius */
  --r-lg: 14px;
  --r-md: 12px;

  /* Typography */
  --fs-base: clamp(15px, 2.6vw, 17px);
  --fs-sm: clamp(13px, 2.3vw, 14px);
  --fs-h1: clamp(18px, 3.4vw, 22px);
  --fs-h2: clamp(16px, 3.0vw, 18px);

  /* Loader colors (adaptive) */
  --loader-stick: color-mix(in srgb, var(--tg-text) 28%, transparent);
  --loader-stick2: color-mix(in srgb, var(--tg-text) 40%, transparent);
  --loader-puck: color-mix(in srgb, var(--tg-text) 78%, transparent);
}

/* If you add JS setting: document.documentElement.dataset.tg = tg.colorScheme */
:root[data-tg="light"]{
  --border: color-mix(in srgb, var(--tg-text) 18%, transparent);
}
:root[data-tg="dark"]{
  --border: color-mix(in srgb, var(--tg-text) 24%, transparent);
}

/* =========
   Web-only theme override (outside Telegram)
   Set by JS: document.documentElement.dataset.web = "1";
           + document.documentElement.dataset.webTheme = "light" | "dark"
   ========= */
:root[data-web="1"][data-web-theme="light"]{
  color-scheme: light;
  --tg-theme-bg-color: #f5f7fb;
  --tg-theme-text-color: #0f172a;
  --tg-theme-hint-color: #64748b;
  --tg-theme-link-color: #2563eb;
  --tg-theme-button-color: #2563eb;
  --tg-theme-button-text-color: #ffffff;
  --tg-theme-secondary-bg-color: #ffffff;
  --tg-theme-section-bg-color: #ffffff;
  --shadow: 0 10px 22px rgba(15,23,42,.07);
}

:root[data-web="1"][data-web-theme="dark"]{
  color-scheme: dark;
  --tg-theme-bg-color: #0b1220;
  --tg-theme-text-color: #e5e7eb;
  --tg-theme-hint-color: #94a3b8;
  --tg-theme-link-color: #60a5fa;
  --tg-theme-button-color: #3b82f6;
  --tg-theme-button-text-color: #ffffff;
  --tg-theme-secondary-bg-color: #0f1a2d;
  --tg-theme-section-bg-color: #0f1a2d;
  --shadow: 0 16px 34px rgba(0,0,0,.35);
}

/* =========
   Base / reset
   ========= */
html{
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  font-size: 16px;
}

body{
  margin: 0;
  background: var(--tg-bg);
  color: var(--tg-text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size: var(--fs-base);
  line-height: 1.35;
}

a{ color: var(--tg-link); text-decoration: none; }
a:hover{ text-decoration: underline; }

*{ box-sizing: border-box; }

hr{
  border: none;
  border-top: 1px solid var(--border);
  margin: 12px 0;
}

/* =========
   Layout
   ========= */
.container{
  padding: 14px;
  max-width: 720px;
  margin: 0 auto;
}

.row{
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
}

/* =========
   Web theme toggle (only rendered outside Telegram)
   ========= */
.webThemeBar{
  position: sticky;
  top: 0;
  z-index: 1000;
  display: flex;
  justify-content: flex-end;
  align-items: center;

  /* stretch to container edges */
  margin: -14px -14px 10px;
  padding: calc(10px + env(safe-area-inset-top)) 14px 10px;

  background: color-mix(in srgb, var(--tg-bg) 88%, transparent);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
  border-radius: 0 0 var(--r-lg) var(--r-lg);
}

.themeToggleBtn{
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card-bg) 86%, var(--tg-bg));
  color: var(--tg-text);
  display: grid;
  place-items: center;
  box-shadow: var(--shadow);
  cursor: pointer;
  user-select: none;
  transition: transform .06s ease, filter .12s ease, background .12s ease, border-color .12s ease;
}

.themeToggleBtn:hover{
  filter: brightness(1.03);
}

.themeToggleBtn:active{
  transform: scale(0.98);
}

.themeToggleBtn:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--tg-btn) 22%, transparent), var(--shadow);
}

/* =========
   Cards / badges
   ========= */
.card{
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  padding: 12px;
  margin: 10px 0;
  box-shadow: var(--shadow);
}

.badge{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border: 1px solid var(--border);
  border-radius: 999px;
  background: var(--muted-bg);
  color: var(--tg-text);
  font-size: var(--fs-sm);
  line-height: 1;
}

/* =========
   Headings / text
   ========= */
h1{
  font-size: var(--fs-h1);
  margin: 6px 0 10px;
  line-height: 1.15;
}

h2{
  font-size: var(--fs-h2);
  margin: 6px 0 10px;
  line-height: 1.2;
}

label{
  display: block;
  font-size: var(--fs-sm);
  color: var(--tg-hint);
  margin: 8px 0 6px;
}

.small{
  color: var(--tg-hint);
  font-size: var(--fs-sm);
}

/* =========
   Inputs
   ========= */
.input,
input,
select,
textarea{
  width: 100%;
  padding: 10px 12px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card-bg) 92%, transparent);
  color: var(--tg-text);
  outline: none;
}

input::placeholder,
textarea::placeholder{
  color: var(--tg-hint);
}

input:focus,
select:focus,
textarea:focus{
  border-color: color-mix(in srgb, var(--tg-btn) 55%, var(--border));
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--tg-btn) 18%, transparent);
}

/* =========
   Buttons
   ========= */
.btn{
  appearance: none;
  border: 1px solid color-mix(in srgb, var(--tg-btn) 70%, transparent);
  border-radius: var(--r-md);
  padding: 12px 14px;
  cursor: pointer;
  background: var(--tg-btn);
  color: var(--tg-btn-text);
  font-weight: 700;
  font-size: var(--fs-base);
  line-height: 1;
  transition: transform .06s ease, filter .12s ease, opacity .12s ease;
}

.btn:active{ transform: scale(0.98); }
.btn:disabled{ opacity: .6; cursor: not-allowed; }

.btn.secondary{
  background: transparent;
  color: var(--tg-text);
  border: 1px solid var(--border);
}

.btn.secondary:hover{
  background: var(--muted-bg);
}

/* =========
   Loader (sticks crossed + puck slide)
   ========= */
.loaderWrap{
  min-height: 60vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:14px;
  padding: 16px;
}

.loaderIce{
  position:relative;
  width:160px;
  height:100px;
}

.hStick{
  position:absolute;
  left:20px;
  top:46px;
  width:120px;
  height:10px;
  border-radius:999px;
  background: var(--loader-stick);
  transform-origin: 18px 5px;
  filter: drop-shadow(0 8px 14px rgba(0,0,0,.18));
}

/* обмотка/ручка */
.hStick::before{
  content:"";
  position:absolute;
  left:-2px;
  top:-2px;
  width:28px;
  height:14px;
  border-radius:999px;
  background: var(--loader-stick2);
  opacity:.95;
}

/* лопатка клюшки */
.hStick::after{
  content:"";
  position:absolute;
  right:-14px;
  top:-4px;
  width:28px;
  height:18px;
  border-radius:4px 10px 10px 10px;
  background: var(--loader-stick2);
  transform: skewX(-18deg);
}

.hStick.left{ transform: rotate(32deg); }
.hStick.right{ transform: rotate(-32deg); }

.puck{
  position:absolute;
  left:50%;
  top:50%;
  width:24px;
  height:24px;
  border-radius:50%;
  transform: translate(-50%,-50%);
  background: var(--loader-puck);
  box-shadow:
    0 10px 22px rgba(0,0,0,.18) inset,
    0 10px 20px rgba(0,0,0,.14);
  animation: puckSlide 1.05s ease-in-out infinite;
}

@keyframes puckSlide{
  0%   { transform: translate(calc(-50% - 58px), -50%); opacity:.7; }
  50%  { transform: translate(calc(-50% + 58px), -50%); opacity:1; }
  100% { transform: translate(calc(-50% - 58px), -50%); opacity:.7; }
}

.loaderText{
  opacity:.85;
  font-size: var(--fs-sm);
  color: var(--tg-hint);
}
/* ===== Hockey Loader (no Tailwind) ===== */
.hkLoader{
  min-height: 60vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:18px;
  padding: 18px;
}

.hkStage{
  position: relative;
  width: 320px;
  max-width: 92vw;
  height: 140px;
}

.hkSticks{
  position: relative;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 0 14px;
}

.hkLogoWrap{
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%, -64%); /* чуть выше центра, чтобы шайба не залезала */
  width:90px;
  height:90px;
  background: color-mix(in srgb, var(--tg-bg) 55%, transparent);
  border: 1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow: 0 10px 24px rgba(0,0,0,.15);
  z-index: 3;
  pointer-events: none;
}

.hkLogo{
  width: 90px;
  height: 90px;
  object-fit: contain;
  filter: drop-shadow(0 6px 12px rgba(0,0,0,.18));
}

.hkStickWrap{
  transform: scale(1);
  transition: transform 260ms ease;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.18));
}

.hkStickWrap.isActive{
  transform: scale(1.10);
}

.hkStickSvg{
  width: 80px;
  height: 80px;
}

/* цвета клюшек под тему */
.hkStickWrap:first-child .hkStickSvg path{
  fill: color-mix(in srgb, var(--tg-link) 70%, var(--tg-text));
}

.hkRight .hkStickSvg path{
  fill: color-mix(in srgb, var(--tg-btn) 70%, #c41e3a);
}

.hkFlip{ transform: scaleX(-1); }

.hkPuckRail{
  position:absolute;
  left:0; right:0;
  top: 50%;
  transform: translateY(-50%);
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}

.hkPuck{
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: color-mix(in srgb, var(--tg-text) 85%, transparent);
  box-shadow:
    0 8px 16px rgba(0,0,0,.22),
    inset 0 2px 4px rgba(255,255,255,.18);
  transition: transform 1000ms ease-in-out, opacity 1000ms ease-in-out;
  opacity: .95;
}

.hkPuck.toRight{ transform: translateX(128px); }
.hkPuck.toLeft{ transform: translateX(-128px); }

.hkIceLine{
  position:absolute;
  left:0; right:0;
  bottom: 10px;
  height: 4px;
  border-radius: 999px;
  opacity: .25;
  background: linear-gradient(90deg,
    color-mix(in srgb, var(--tg-text) 18%, transparent),
    color-mix(in srgb, var(--tg-text) 10%, transparent),
    color-mix(in srgb, var(--tg-text) 18%, transparent)
  );
}

.hkMeta{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
}

.hkDots{
  display:flex;
  gap:7px;
}

.hkDots span{
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: color-mix(in srgb, var(--tg-link) 70%, var(--tg-btn));
  animation: hkBounce 900ms infinite ease-in-out;
}

.hkDots span:nth-child(2){ animation-delay: 150ms; }
.hkDots span:nth-child(3){ animation-delay: 300ms; }

@keyframes hkBounce{
  0%, 80%, 100% { transform: translateY(0); opacity: .65; }
  40% { transform: translateY(-6px); opacity: 1; }
}

.hkText{
  font-size: var(--fs-sm, 14px);
  color: var(--tg-hint);
  font-weight: 600;
}

.statusBlock{
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
  margin: 10px 0;
  background: var(--card-bg);
}

.statusHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:8px;
}

.statusTitle{
  font-weight: 800;
}

/* мягкие цветные подложки, чтобы в светлой теме не слепило */
.statusBlock.yes{
  background: color-mix(in srgb, #22c55e 12%, var(--card-bg));
  border-color: color-mix(in srgb, #22c55e 35%, var(--border));
}

.statusBlock.maybe{
  background: linear-gradient(
    135deg,
    rgba(120,120,120,0.12),
    rgba(255,255,255,0.02)
  );
  border: 1px solid rgba(255,255,255,0.07);
  box-shadow: 0 8px 22px rgba(0,0,0,0.16);
}

.statusBlock.no{
  background: color-mix(in srgb, #ef4444 10%, var(--card-bg));
  border-color: color-mix(in srgb, #ef4444 35%, var(--border));
}

.statusList{
  display:flex;
  flex-direction:column;
  gap:6px;
}

.statusRow{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
  padding: 6px 8px;
  border-radius: 10px;
  background: color-mix(in srgb, var(--tg-text) 4%, transparent);
}
/* Пилюли игроков */
.pills {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--muted-bg);
  color: var(--tg-text);
  font-size: 14px;
  line-height: 1;
  white-space: nowrap;
}

.pill .pillName {
  font-weight: 800;
}

.pill .pillMeta {
  font-size: 12px;
  opacity: 0.8;
}

/* Цвета по позиции */
.pill.pos-F {
  background: color-mix(in srgb, #7dd3fc 22%, var(--tg-bg));
  border-color: color-mix(in srgb, #7dd3fc 55%, var(--border));
}

.pill.pos-D {
  background: color-mix(in srgb, #fdba74 22%, var(--tg-bg));
  border-color: color-mix(in srgb, #fdba74 55%, var(--border));
}

.pill.pos-G {
  background: color-mix(in srgb, #86efac 22%, var(--tg-bg));
  border-color: color-mix(in srgb, #86efac 55%, var(--border));
}

/* маленький маркер позиции */
.pill .posTag {
  font-weight: 900;
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--tg-text) 7%, transparent);
}
.datetimeRow{
  display:flex;
  gap:10px;
}

.datetimeRow > *{
  flex: 1 1 0;
  min-width: 0;
}

@media (max-width: 420px){
  .datetimeRow{ flex-direction: column; }
}
.teamGroupTitle{
  margin: 10px 0 6px;
  font-size: 13px;
  opacity: .75;
  font-weight: 600;
}
.gameCard {
  position: relative;
  overflow: hidden;
  border-radius: 16px;
  padding: 0; /* важно: сами блоки внутри дадут отступы */
  color: #fff; /* чтобы в светлой теме текст не темнел */
}

/* Верхняя шапка */
.gameCard__topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 10px 12px;
  background: rgba(0,0,0,.22);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.12);
}

.gameCard__title{
  font-weight: 900;
  font-size: 14px;
  line-height: 1.1;
  text-shadow: 0 2px 12px rgba(0,0,0,.55);
}

.gameCard__topRight{
  display:flex;
  align-items:center;
  gap:8px;
}

.gameCard__pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 4px 8px;
  border-radius: 999px;
  background: rgba(255,255,255,.14);
  border: 1px solid rgba(255,255,255,.18);
}

/* Основная часть: дата / инфо / круг */
.gameCard__main{
  display:grid;
  grid-template-columns: 76px 1fr 64px;
  gap: 10px;
  padding: 12px;
  align-items:center;
}

.gameCard__date{
  border-radius: 14px;
  padding: 10px 8px;
  background: rgba(0,0,0,.20);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,.12);
  text-align:left;
}

.gameCard__month{
  font-weight: 900;
  font-size: 12px;
  opacity: .9;
  letter-spacing: .6px;
}

.gameCard__day{
  font-weight: 900;
  font-size: 34px;
  line-height: 1;
}

.gameCard__info{
  min-width: 0;
}

.gameCard__when{
  font-weight: 900;
  font-size: 16px;
  text-shadow: 0 2px 12px rgba(0,0,0,.55);
}

.gameCard__loc{
  margin-top: 6px;
  font-size: 13px;
  opacity: .92;
  text-shadow: 0 2px 12px rgba(0,0,0,.55);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Круг прогресса */
.gameCard__ringWrap{
  justify-self:end;
}

.progressRing{
  --size: 56px;
  --th: 6px;
  --p: 0;          /* 0..1 */
  --c: rgba(64,196,99,1);

  width: var(--size);
  height: var(--size);
  position: relative;
}

.progressRing::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:999px;

  background: conic-gradient(
    var(--c) calc(var(--p) * 1turn),
    rgba(255,255,255,.22) 0
  );

  -webkit-mask: radial-gradient(
    farthest-side,
    transparent calc(100% - var(--th)),
    #000 calc(100% - var(--th))
  );
  mask: radial-gradient(
    farthest-side,
    transparent calc(100% - var(--th)),
    #000 calc(100% - var(--th))
  );

  filter: drop-shadow(0 2px 10px rgba(0,0,0,.35));
}

.ringCenter{
  position:absolute;
  inset: var(--th);
  border-radius:999px;
  display:flex;
  align-items:center;
  justify-content:center;

  font-weight: 900;
  font-size: 16px;

  background: rgba(0,0,0,.22);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,.10);
  text-shadow: 0 2px 10px rgba(0,0,0,.55);
}

/* Кнопки */
.gameCard__actions{
  display:flex;
  gap: 10px;
  padding: 0 12px 12px 12px;
}

.rsvpBtn{
  flex:1;
  height: 42px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.35);
  background: rgba(0,0,0,.22);
  backdrop-filter: blur(10px);
  color: #fff;
  font-weight: 900;
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
}

.rsvpBtn:not(.active){
  opacity: .8; /* "неактивные", пока maybe */
}

.rsvpBtn.active.in{
  background: rgba(64,196,99,.22);
  border-color: rgba(64,196,99,.75);
  box-shadow: 0 0 0 2px rgba(64,196,99,.18) inset;
  opacity: 1;
}

.rsvpBtn.active.out{
  background: rgba(255,77,79,.20);
  border-color: rgba(255,77,79,.75);
  box-shadow: 0 0 0 2px rgba(255,77,79,.18) inset;
  opacity: 1;
}

.rsvpBtn:disabled{
  opacity: .45;
  cursor: not-allowed;
}

/* Чуть приятнее на мобильных */
@media (max-width: 420px){
  .gameCard__main{ grid-template-columns: 72px 1fr 58px; }
  .progressRing{ --size: 52px; }
}

/* Ближайшая игра */
.gameCard.isNext {
  border: 1px solid rgba(0, 200, 120, 0.55);
  box-shadow: 0 0 0 2px rgba(0, 200, 120, 0.18);
  transform: scale(1.01);
}

/* Прошедшие */
.gameCard.isPast {
  opacity: 0.85;
}

/* Мой RSVP → мягкий фон */
.gameCard.tone-yes {
  background: linear-gradient(135deg, rgba(0, 200, 120, 0.12), rgba(0, 200, 120, 0.03));
}

.gameCard.tone-maybe {
  background: linear-gradient(135deg, rgba(255, 200, 0, 0.14), rgba(255, 200, 0, 0.03));
}

.gameCard.tone-no {
  background: linear-gradient(135deg, rgba(255, 80, 80, 0.14), rgba(255, 80, 80, 0.03));
}

.gameCard.tone-none {
  /* как было */
}
/* чтобы контент не прятался под нижним меню */
.appShell {
  padding-bottom: calc(72px + env(safe-area-inset-bottom));
}

.bottomNav{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;

  /* было: 10px + safe-area => давало отрыв */
  padding: 10px 12px env(safe-area-inset-bottom);

  z-index: 999;
}

.bottomNavInner{
  margin: 0 auto;
  max-width: 760px;

  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 1fr;
  gap: 8px;

  padding: 10px;
  border-radius: 55px;

  background: rgba(20,20,25,0.78);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: 0 12px 30px rgba(0,0,0,0.25);
}

.bottomNavItem{
  border: 0;
  background: transparent;
  color: rgba(255,255,255,0.85);
  border-radius: 55px;

  min-height: 54px;
  padding: 10px 6px;

  display: grid;
  place-items: center;
  gap: 5px;
  cursor: pointer;
}

.bottomNavItem.isActive{
  background: rgba(255,255,255,0.12);
  color: #fff;
  outline: 1px solid rgba(255,255,255,0.14);
}


.gameCard.isNext {
  transform: scale(1.01);
  border: 1px solid rgba(0, 255, 120, 0.35);
  box-shadow: 0 12px 30px rgba(0, 255, 120, 0.08);
}

.gameCard.status-yes {
  background: linear-gradient(135deg, rgba(0,255,120,0.16), rgba(255,255,255,0.02));
}

.gameCard.status-no {
  background: linear-gradient(135deg, rgba(255,70,70,0.16), rgba(255,255,255,0.02));
}

.gameCard.status-maybe {
  background: linear-gradient(
    135deg,
    rgba(120,120,120,0.12),
    rgba(255,255,255,0.02)
  );
  border: 1px solid rgba(255,255,255,0.07);
  box-shadow: 0 8px 22px rgba(0,0,0,0.16);
}

.btn.tiny, .btn.secondary.tiny {
  padding: 8px 10px;
  font-size: 12px;
}
.sheetBackdrop{
  position:fixed;
  inset:0;
  background: rgba(0,0,0,.55);
  z-index: 9999;
  display:flex;
  align-items:flex-end;
  /* приятнее в телеге */
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}

/* важное: НЕ прозрачный фон */
.sheet{
  width:100%;
  max-height: 92vh;
  background: var(--tg-theme-bg-color, var(--bg, #0f1115));
  border-top-left-radius: 18px;
  border-top-right-radius: 18px;
  border:1px solid rgba(255,255,255,.10);
  overflow:hidden;
  box-shadow: 0 -12px 40px rgba(0,0,0,.45);
}

/* важное: НЕ через color-mix */
.sheetHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border-bottom:1px solid rgba(255,255,255,.10);
  background: var(--tg-theme-secondary-bg-color, rgba(20,22,26,.98));
}

.sheetTitle{
  font-weight: 1000;
  text-align:center;
  flex:1;
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--tg-theme-text-color, var(--tg-text, #fff));
}

/* сами кнопки — всегда видимые */
.sheetBtn{
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.08);
  color: var(--tg-theme-text-color, #fff);
  border-radius: 12px;
  padding: 8px 10px;
  cursor:pointer;
  line-height: 1;
  font-weight: 900;
}
.sheetBtn:active{ transform: translateY(1px); }

.sheetBody{
  padding:12px;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  max-height: 82vh;
  padding-bottom: calc(18px + env(safe-area-inset-bottom));
}
.gameListItem{
  cursor: pointer;
  padding: 12px 14px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--card-bg);
  transition: transform .08s ease, background .15s ease, border-color .15s ease;
}

.gameListItem:active{
  transform: translateY(1px);
}

.gameListItem:hover{
  border-color: color-mix(in srgb, var(--tg-text) 18%, var(--border));
  background: color-mix(in srgb, var(--tg-text) 4%, var(--card-bg));
}

.gameListItem.isCancelled{
  opacity: .72;
}

.gameTitle{
  font-weight: 900;
  font-size: 15px;
  letter-spacing: .2px;
}

.gameArena{
  margin-top: 6px;
  font-size: 13px;
  opacity: .9;
}

.gameVideoTag{
  margin-top: 8px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--tg-text) 6%, transparent);
  font-size: 12px;
  font-weight: 800;
  width: fit-content;
}

.badgeMini.bad{
  opacity: .85;
  filter: saturate(.7);
}
.segRow{
  display:flex;
  gap:8px;
  margin-top:10px;
  flex-wrap:wrap;
}


.segBtn.segIcon{
  width: 44px;
  height: 38px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--muted-bg);
  color: var(--tg-text);
  font-size: 18px;
  line-height: 1;
  cursor: pointer;
  transition: transform .05s ease, background .15s ease, border-color .15s ease, opacity .15s ease;
}

.segBtn.segIcon:active { transform: scale(0.98); }

.segBtn.segIcon.on{
  background: var(--tg-btn);
  color: var(--tg-btn-text);
  border-color: color-mix(in srgb, var(--tg-btn) 65%, var(--border));
  box-shadow: 0 6px 16px rgba(0,0,0,.18);
}

.segBtn.segIcon:focus-visible{
  outline: 2px solid color-mix(in srgb, var(--tg-btn) 70%, transparent);
  outline-offset: 2px;
}


.segBtn{
  flex: 1 1 120px;
  border: 1px solid var(--border);
  background: var(--muted-bg);         /* было transparent */
  color: var(--tg-text);              /* ВОТ где настраивается цвет текста */
  border-radius: 12px;
  padding: 10px 10px;
  font-weight: 800;
  cursor: pointer;
}

.segBtn.active{
  background: var(--tg-btn);          /* заметная активная кнопка */
  color: var(--tg-btn-text);
  border-color: color-mix(in srgb, var(--tg-btn) 55%, var(--border));
}

:root[data-tg="dark"] .segBtn{
  background: color-mix(in srgb, var(--tg-text) 10%, transparent); /* чуть ярче в dark */
  border-color: color-mix(in srgb, var(--tg-text) 30%, transparent);
}

:root[data-tg="dark"] .segBtn.active{
  background: color-mix(in srgb, var(--tg-btn) 85%, black);
}

/* dark theme overrides for icon segmented buttons (admin attendance) */
:root[data-tg="dark"] .segBtn.segIcon{
  background: color-mix(in srgb, var(--tg-text) 14%, transparent);
  border-color: color-mix(in srgb, var(--tg-text) 32%, transparent);
  color: var(--tg-text);
}

:root[data-tg="dark"] .segBtn.segIcon.on{
  background: color-mix(in srgb, var(--tg-btn) 88%, black);
  border-color: color-mix(in srgb, var(--tg-btn) 72%, white);
  color: var(--tg-btn-text);
  box-shadow:
    0 0 0 2px color-mix(in srgb, var(--tg-btn) 28%, transparent),
    0 10px 22px rgba(0,0,0,35);
}


.segBtn { color: var(--tg-text); }
.segBtn.active { color: var(--tg-btn-text); }

.segRow--icons{
  flex-wrap: nowrap;
}
.segRow--icons .segBtn.segIcon{
  width: auto;               /* перебиваем width:44px */
  flex: 1 1 0;               /* ✅ 3 равные кнопки */
  min-width: 44px;           /* чтобы иконка не сжалась в кашу */
}

.gameListItem.isNext{
  box-shadow: 0 0 0 1px rgba(255,255,255,.08), 0 10px 30px rgba(0,0,0,.18);
}
.jerseyBadge{
  width: 34px;
  height: 34px;
  display: grid;
  place-items: center;
  flex: 0 0 34px;

  /* стиль */
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.16);
  border-radius: 10px;
  box-shadow: 0 10px 24px rgba(0,0,0,0.18);
  backdrop-filter: blur(8px);

  /* силуэт */
  -webkit-clip-path: polygon(
    22% 18%, 34% 6%, 66% 6%, 78% 18%,
    92% 18%, 98% 34%, 84% 44%,
    84% 96%, 16% 96%, 16% 44%,
    2% 34%, 8% 18%
  );
  clip-path: polygon(
    22% 18%, 34% 6%, 66% 6%, 78% 18%,
    92% 18%, 98% 34%, 84% 44%,
    84% 96%, 16% 96%, 16% 44%,
    2% 34%, 8% 18%
  );

  position: relative;
  overflow: hidden;
}

.jerseyBadge::before{
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 30% 25%, rgba(255,255,255,0.18), transparent 55%);
  pointer-events: none;
}

.jerseyBadgeText{
  position: relative;
  z-index: 1;
  font-weight: 900;
  font-size: 14px;
  letter-spacing: -0.5px;
  color: rgba(255,255,255,0.92);
  text-shadow: 0 2px 10px rgba(0,0,0,0.35);
  line-height: 1;
}
.jerseyWrap{
  width: var(--jb-size);
  height: var(--jb-size);
  position: relative;
  flex: 0 0 var(--jb-size);
}

.jerseySvg{
  width: 100%;
  height: 100%;
  display: block;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.22));
}

/* Основной цвет джерси */
.jerseyFill{
  fill: var(--jersey-fill);
}

/* Контур */
.jerseyStroke{
  fill: none;
  stroke: var(--jersey-stroke);
  stroke-width: 2;
  stroke-linejoin: round;
}

/* “Блик” поверх */
.jerseySheen{
  fill: none;
  stroke: rgba(255,255,255,0.14);
  stroke-width: 8;
  stroke-linecap: round;
  stroke-linejoin: round;
  /* дуга блика (просто трюк: обводка силуэта + смещение) */
  transform: translate(-6px, -8px);
  filter: blur(0.2px);
  opacity: 0.55;
}

/* Полосы */
.jerseyStripe{ fill: var(--jersey-accent); }
.jerseyStripeSoft{ fill: rgba(255,255,255,0.06); }


/* Авто-адаптация под количество цифр */
/* .jerseyWrap[data-len="1"] .jerseyNum{ font-size: 14px; }
.jerseyWrap[data-len="2"] .jerseyNum{ font-size: 13px; }
.jerseyWrap[data-len="3"] .jerseyNum{ font-size: 11px; } */

/* Чуть разные “характеры” пресетов */
.jersey--modern .jerseyStroke{ stroke-width: 2.2; }
.jersey--slim .jerseyStroke{ stroke-width: 2; opacity: 0.9; }
/* База */
.jerseyWrap{
  width: var(--jb-size);
  height: var(--jb-size);
  position: relative;
  flex: 0 0 var(--jb-size);
}

.jerseySvg{
  width: 100%;
  height: 100%;
  display: block;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.22));
}

.jerseyFill{ fill: var(--jersey-fill); }
.jerseyStroke{
  fill: none;
  stroke: var(--jersey-stroke);
  stroke-width: 2;
  stroke-linejoin: round;
}

.jerseyStripe{ fill: var(--jersey-accent); }
.jerseyStripeSoft{ fill: rgba(255,255,255,0.12); }



.jerseyWrap[data-len="1"] .jerseyNum{ font-size: calc(var(--jb-size) * 0.5); }
.jerseyWrap[data-len="2"] .jerseyNum{ font-size: calc(var(--jb-size) * 0.41); }
.jerseyWrap[data-len="3"] .jerseyNum{ font-size: calc(var(--jb-size) * 0.34); }

/* LIGHT: тёмная джерси + белый номер */
:root[data-theme="light"] .jerseyWrap,
:root[data-tg="light"] .jerseyWrap{
  --jersey-fill: rgba(0,0,0,0.78);
  --jersey-stroke: rgba(0,0,0,0.90);
  --jersey-accent: rgba(255,255,255,0.22);
  --jersey-text: rgba(255,255,255,0.98);
}

/* DARK: светлая джерси + тёмный номер */
:root[data-theme="dark"] .jerseyWrap,
:root[data-tg="dark"] .jerseyWrap{
  --jersey-fill: rgba(255,255,255,0.86);
  --jersey-stroke: rgba(255,255,255,0.98);
  --jersey-accent: rgba(0,0,0,0.12);
  --jersey-text: rgba(0,0,0,0.92);
}

/* WEB (outside TG): используем data-web-theme, чтобы джерси корректно переключалась */
:root[data-web="1"][data-web-theme="light"] .jerseyWrap{
  --jersey-fill: rgba(0,0,0,0.78);
  --jersey-stroke: rgba(0,0,0,0.90);
  --jersey-accent: rgba(255,255,255,0.22);
  --jersey-text: rgba(255,255,255,0.98);
}

:root[data-web="1"][data-web-theme="dark"] .jerseyWrap{
  --jersey-fill: rgba(255,255,255,0.86);
  --jersey-stroke: rgba(255,255,255,0.98);
  --jersey-accent: rgba(0,0,0,0.12);
  --jersey-text: rgba(0,0,0,0.92);
}

/* Номер — делаем КРУПНЕЕ и от size */
.jerseyNum{
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-weight: 900;
  color: var(--jersey-text);
  text-shadow: 0 2px 10px rgba(0,0,0,.35);
  line-height: 1;
  user-select: none;

  font-size: calc(var(--jb-size) * 0.46); /* было мелко — теперь норм */
}
/* для pill */
.pill.isMe{
  position: relative;
  border: 1px solid rgba(80,160,255,0.55);
  box-shadow:
    0 0 0 2px rgba(80,160,255,0.18),
    0 12px 26px rgba(0,0,0,0.18);
}

.pill.isMe::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius: 999px; /* pill обычно круглый */
  background: radial-gradient(circle at 30% 20%, rgba(80,160,255,0.45), transparent 55%);
  filter: blur(10px);
  opacity: 0.9;
  pointer-events:none;
}

/* “золото” (если добавишь класс isMeGold) */
.pill.isMeGold{
  border-color: rgba(255,200,70,0.65);
  box-shadow:
    0 0 0 2px rgba(255,200,70,0.18),
    0 12px 26px rgba(0,0,0,0.18);
}
.pill.isMeGold::before{
  background: radial-gradient(circle at 30% 20%, rgba(255,200,70,0.48), transparent 55%);
}

/* для карточек в списке игроков */
.card.isMeCard{
  position: relative;
  border: 1px solid rgba(80,160,255,0.45);
  box-shadow:
    0 0 0 2px rgba(80,160,255,0.14),
    0 18px 40px rgba(0,0,0,0.16);
}
.card.isMeCard::before{
  content:"";
  position:absolute;
  inset:-3px;
  border-radius: inherit;
  background: radial-gradient(circle at 20% 0%, rgba(80,160,255,0.30), transparent 55%);
  filter: blur(14px);
  pointer-events:none;
}
/* Цвет подсветки статуса (поверх картинки) */
.gameCard { 
  --toneGlow: rgba(255,255,255,0); 
  --toneEdge: rgba(255,255,255,0);
}

.gameCard.tone-yes   { --toneGlow: rgba(0, 255, 140, .28); --toneEdge: rgba(0, 255, 140, .75); }
.gameCard.tone-maybe { --toneGlow: rgba(255, 200, 0, .26); --toneEdge: rgba(255, 200, 0, .75); }
.gameCard.tone-no    { --toneGlow: rgba(255, 70, 70, .28); --toneEdge: rgba(255, 70, 70, .75); }
.gameCard.tone-none  { --toneGlow: rgba(120, 160, 255, .14); --toneEdge: rgba(120, 160, 255, .35); }


/* картинка */
.gameCard::before{
  content:"";
  position:absolute;
  inset:0;
  background-image: var(--game-bg);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transform: scale(1.06);
  z-index: 0;
}

/* затемнение для читаемости текста */
/* затемнение + цвет статуса (чтобы было видно tone) */
.gameCard::after{
  content:"";
  position:absolute;
  inset:0;
  z-index: 1;

  background:
    /* тонкая цветная полоска слева */
    linear-gradient(90deg, var(--toneEdge) 0 4px, rgba(0,0,0,0) 4px 100%),

    /* цветное свечение сверху-слева */
    radial-gradient(120% 90% at 15% 10%, var(--toneGlow) 0%, rgba(0,0,0,0) 60%),

    /* основное затемнение для читаемости */
    linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.55));
}
/* Текст на карточках игр всегда светлый (фоновая картинка затемнена) */
.gameCard{
  color: rgba(255,255,255,.96);
}

.gameCard .small{
  color: rgba(255,255,255,.82);
}

/* бейджи на карточке тоже делаем читаемыми */
.gameCard .badge{
  color: rgba(255,255,255,.92);
  border-color: rgba(255,255,255,.18);
  background: rgba(0,0,0,.22);
}

/* на всякий — если есть ссылки */
.gameCard a{
  color: rgba(255,255,255,.96);
}

/* весь контент карточки поверх */
.gameCard > *{
  position: relative;
  z-index: 2;
}
/* ===== Buttons inside game cards: contrast on photo background ===== */
.gameCard .btn.tiny,
.gameCard .btn.secondary.tiny{
  color: rgba(255,255,255,.96);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.18);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 10px 22px rgba(0,0,0,.35);
}

/* “неактивная” (secondary) — чуть темнее, но читаемо */
.gameCard .btn.secondary.tiny{
  background: rgba(0,0,0,.20);
}


.gameCard.status-maybe .btn.tiny{
  box-shadow:
    0 0 0 1px rgba(120,180,255,.35),
    0 0 18px rgba(120,180,255,.12),
    0 10px 22px rgba(0,0,0,.35);
}

/* disabled на прошедших — чтобы видно, что “не кликается” */
.gameCard .btn:disabled{
  opacity: .55;
  filter: grayscale(.25);
}
/* ===== Buttons inside game cards: contrast on photo background ===== */
.gameCard .btn.tiny,
.gameCard .btn.secondary.tiny{
  color: rgba(255,255,255,.96);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.18);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 10px 22px rgba(0,0,0,.35);
}

/* “активная” кнопка (у тебя это .btn.tiny) */
.gameCard .btn.tiny{
  background: rgba(255,255,255,.14);
  border-color: rgba(255,255,255,.26);
}

/* “неактивная” (secondary) — чуть темнее, но читаемо */
.gameCard .btn.secondary.tiny{
  background: rgba(0,0,0,.20);
}

/* Подсветка активной кнопки по статусу карточки */
.gameCard.status-yes .btn.tiny{
  box-shadow:
    0 0 0 1px rgba(0,255,140,.35),
    0 0 18px rgba(0,255,140,.12),
    0 10px 22px rgba(0,0,0,.35);
}

.gameCard.status-no .btn.tiny{
  box-shadow:
    0 0 0 1px rgba(255,70,70,.35),
    0 0 18px rgba(255,70,70,.12),
    0 10px 22px rgba(0,0,0,.35);
}

.gameCard.status-maybe .btn.tiny{
  box-shadow:
    0 0 0 1px rgba(120,180,255,.35),
    0 0 18px rgba(120,180,255,.12),
    0 10px 22px rgba(0,0,0,.35);
}

/* disabled на прошедших — чтобы видно, что “не кликается” */
.gameCard .btn:disabled{
  opacity: .55;
  filter: grayscale(.25);
}
.gameCard__awardLine{
  margin-top: 8px;
  font-size: 13px;
  opacity: .95;
  text-shadow: 0 2px 12px rgba(0,0,0,.55);
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.talismanIcon{
  width: 45px;
  height: 45px;
  padding: 3px;
  border-radius: 999px;
  background: rgba(0,0,0,.20);
  border: 1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(8px);
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.45));
}
.modalBackdrop{
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: rgba(0,0,0,.55);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
}

.modalSheet{
  width: min(92vw, 380px);
  border-radius: 16px;
  padding: 14px;
  background: rgba(20,20,20,.92);
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 18px 50px rgba(0,0,0,.45);
}
html[data-theme="light"] .modalSheet{
  background: rgba(255,255,255,.92);
  border: 1px solid rgba(0,0,0,.10);
}
/* outline-кнопки для модалки (и не только) */
.btn.outline{
  background: transparent !important;
  border: 1px solid rgba(255,255,255,.22);
  color: inherit;
  box-shadow: none !important;
}

.btn.outline:hover{
  border-color: rgba(255,255,255,.35);
}

/* активная — тоже “в рамках”, но читается лучше */
.btn.outline.active{
  border-color: rgba(255,255,255,.65);
  background: rgba(255,255,255,.08) !important;
}

/* светлая тема */
html[data-theme="light"] .btn.outline{
  border-color: rgba(0,0,0,.18);
}
html[data-theme="light"] .btn.outline:hover{
  border-color: rgba(0,0,0,.28);
}
html[data-theme="light"] .btn.outline.active{
  border-color: rgba(0,0,0,.55);
  background: rgba(0,0,0,.06) !important;
}

/* ===== Toast (global) ===== */
.toastWrap{
  position: fixed;
  left: 12px;
  right: 12px;
  top: calc(12px + env(safe-area-inset-top));
  z-index: 99999;
  pointer-events: none;
  display: flex;
  justify-content: center;
}

.toast{
  width: min(520px, 100%);
  pointer-events: auto;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 82%, black);
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transform: translateY(-8px);
  opacity: 0;
  transition: transform .18s ease, opacity .18s ease;
}

.toast.isShow{
  transform: translateY(0);
  opacity: 1;
}

.toastRow{
  display: flex;
  gap: 10px;
  align-items: flex-start;
}

.toastIcon{
  line-height: 1;
  font-size: 18px;
  margin-top: 1px;
}

.toastText{
  flex: 1;
  font-weight: 800;
  font-size: 13px;
  line-height: 1.25;
  opacity: .95;
  white-space: pre-wrap;
}

.toastClose{
  pointer-events: auto;
  border: 1px solid var(--border);
  background: transparent;
  border-radius: 10px;
  padding: 6px 8px;
  cursor: pointer;
  line-height: 1;
  opacity: .9;
}
.toastClose:active{ transform: translateY(1px); }

.toastBar{
  margin-top: 8px;
  height: 2px;
  border-radius: 999px;
  background: rgba(255,255,255,.10);
  overflow: hidden;
}
.toastBar > i{
  display: block;
  height: 100%;
  width: 35%;
  background: rgba(255,255,255,.55);
  border-radius: 999px;
  animation: toastMove 1.05s ease-in-out infinite;
}

@keyframes toastMove{
  0%   { transform: translateX(-120%); }
  50%  { transform: translateX(140%); }
  100% { transform: translateX(340%); }
}

/* tones */
.toast.tone-success{
  border-color: color-mix(in srgb, #22c55e 35%, var(--border));
  box-shadow: 0 10px 30px rgba(34,197,94,.12), 0 10px 30px rgba(0,0,0,.22);
}
.toast.tone-error{
  border-color: color-mix(in srgb, #ef4444 35%, var(--border));
  box-shadow: 0 10px 30px rgba(239,68,68,.12), 0 10px 30px rgba(0,0,0,.22);
}
.toast.tone-info{
  border-color: color-mix(in srgb, #60a5fa 28%, var(--border));
  box-shadow: 0 10px 30px rgba(96,165,250,.10), 0 10px 30px rgba(0,0,0,.22);
}

.modalOverlay{
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: rgba(0,0,0,.55);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 14px;
}

.modalCard{
  width: min(520px, 100%);
  border-radius: 16px;
  padding: 14px;
  background: var(--tg-theme-bg-color, #fff);
  color: var(--tg-theme-text-color, #111);
  box-shadow: 0 18px 50px rgba(0,0,0,.35);
}

.notesPreview {
  opacity: 0.85;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.modalOverlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: rgba(0,0,0,0.55);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 14px;
}

.modalBody {
  width: min(560px, 96vw);
  max-height: 92vh;
  overflow: hidden;
  background: var(--tg-theme-bg-color, #fff);
  color: var(--tg-theme-text-color, #111);
  border-radius: 16px;
  padding: 12px;
  box-shadow: 0 18px 60px rgba(0,0,0,0.35);
}

.modalImg {
  width: 100%;
  max-height: 76vh;
  object-fit: contain;
  display: block;
  border-radius: 12px;
  background: rgba(0,0,0,0.08);
}

/* Контейнер выбора гео внутри Sheet/модалки */
.geoPickerWrap {
  display: flex;
  flex-direction: column;
  gap: 10px;

  /* ВАЖНО: чтобы все влезало в экран миниаппа */
  max-height: calc(100dvh - 160px);
  overflow: auto;
  -webkit-overflow-scrolling: touch;

  /* запас под липкую кнопку снизу */
  padding-bottom: calc(92px + env(safe-area-inset-bottom));
}

/* Список подсказок адреса — не растягиваем на весь экран */
.geoSuggest {
  max-height: 160px;
  overflow: auto;
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 12px;
}

/* Нижняя панель с названием точки + кнопкой */
.geoFooter {
  position: sticky;
  bottom: 0;
  z-index: 5;

  background: rgba(15, 15, 15, .85);
  backdrop-filter: blur(10px);

  border-top: 1px solid rgba(255,255,255,.10);
  padding: 10px 0 calc(10px + env(safe-area-inset-bottom));
}
/* Map modal layout */
.mapPickModal__card {
  width: min(920px, 100%);
  max-height: 90dvh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.mapPickModal__body {
  flex: 1;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: calc(88px + env(safe-area-inset-bottom));
}

.mapPickModal__suggest {
  max-height: 160px;
  overflow: auto;
}

.mapPickModal__footer {
  position: sticky;
  bottom: 0;
  z-index: 10;

  border-top: 1px solid rgba(255,255,255,.10);
  background: rgba(12,12,12,.75);
  backdrop-filter: blur(10px);

  padding: 10px 0 calc(10px + env(safe-area-inset-bottom));
}
.hkLoader2{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:14px;
  padding:18px 14px;
}

.hkOrbitStage{
  position:relative;
  width:150px;
  height:150px;
  display:grid;
  place-items:center;
}

/* центральный круг с логотипом */
.hkMedal{
  position:relative;
  width:86px;
  height:86px;
  border-radius:999px;
  overflow:hidden;
  border:1px solid color-mix(in srgb, var(--border) 85%, transparent);
  box-shadow:
    0 10px 24px rgba(0,0,0,.18),
    inset 0 0 0 999px color-mix(in srgb, var(--card-bg) 80%, transparent);
  background: var(--card-bg);
  z-index:2;
}

.hkMedalLogo{
  width:100%;
  height:100%;
  object-fit:cover;
  transform: scale(1.03);
}

/* орбита: вращаем контейнер, а шайба стоит на радиусе */
.hkOrbit{
  position:absolute;
  inset:0;
  border-radius:999px;
  animation: hkOrbitSpin 1.2s linear infinite;
  z-index:1;
}

/* шайба */
.hkPuck2{
  position:absolute;
  left:50%;
  top:50%;
  width:16px;
  height:16px;
  border-radius:999px;
  transform: translate(-50%, -50%) translateX(62px);
  background: radial-gradient(circle at 35% 35%, rgba(255,255,255,.75), rgba(255,255,255,0) 55%),
              radial-gradient(circle at 50% 60%, rgba(0,0,0,.85), rgba(0,0,0,.95));
  box-shadow: 0 8px 14px rgba(0,0,0,.22);
}

/* легкий след за шайбой */
.hkPuckTrail{
  position:absolute;
  left:50%;
  top:50%;
  width:46px;
  height:10px;
  border-radius:999px;
  transform: translate(-50%, -50%) translateX(40px);
  filter: blur(2px);
  opacity:.55;
  background: linear-gradient(90deg,
    transparent,
    color-mix(in srgb, var(--tg-text) 12%, transparent),
    transparent
  );
}

/* кольца льда */
.hkIceRings{
  position:absolute;
  inset:0;
  border-radius:999px;
  z-index:0;
  pointer-events:none;
  opacity:.65;
}

.hkRing{
  position:absolute;
  inset:0;
  border-radius:999px;
  border:1px solid color-mix(in srgb, var(--border) 75%, transparent);
}

.hkRing1{ inset:10px; opacity:.55; }
.hkRing2{ inset:22px; opacity:.35; }

/* подпись */
.hkMeta2{
  display:flex;
  align-items:center;
  gap:10px;
}

.hkDots2{
  display:flex;
  gap:5px;
}
.hkDots2 span{
  width:6px;
  height:6px;
  border-radius:999px;
  background: color-mix(in srgb, var(--tg-text) 55%, transparent);
  opacity:.6;
  animation: hkDotPulse .9s ease-in-out infinite;
}
.hkDots2 span:nth-child(2){ animation-delay:.15s; }
.hkDots2 span:nth-child(3){ animation-delay:.3s; }

.hkText2{
  font-weight:900;
  opacity:.85;
}

/* анимации */
@keyframes hkOrbitSpin{
  to { transform: rotate(360deg); }
}

@keyframes hkDotPulse{
  0%, 100% { transform: translateY(0); opacity:.55; }
  50% { transform: translateY(-3px); opacity:1; }
}

/* уважение к reduced motion */
@media (prefers-reduced-motion: reduce){
  .hkOrbit{ animation: none; }
  .hkDots2 span{ animation: none; }
}

.yandexRouteBtn{
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.yandexNavIcon{
  width: 18px;
  height: 18px;
  display: inline-block;
  flex: 0 0 auto;
}

.iconBtn{
  border:1px solid var(--border);
  background: transparent;
  border-radius:10px;
  padding:6px 8px;
  cursor:pointer;
  line-height:1;
}
.iconBtn:active{ transform: translateY(1px); }

.gameDetailTop{
  display: grid;
  gap: 10px;
}

/* Верхняя строка: чипы слева, шестерёнка справа */
.gameMetaBar{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: start;
}

.gameMetaChips{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  min-width: 0;
}

/* Чипы компактнее и аккуратнее */
.badge.chip{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 7px 10px;
  border-radius: 999px;
  line-height: 1;
  white-space: nowrap;
}

.chipIcon{
  display: inline-flex;
  transform: translateY(0.5px);
  opacity: 0.9;
}

/* Статус можно визуально отделить */
.badge.chipStatus{
  font-weight: 700;
  /* лёгкое выделение, без привязки к переменным темы */
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.10);
}

/* Кнопка настроек — маленькая “плашка”, а не в общей куче */
.iconBtn.iconBtnSettings{
  width: 36px;
  height: 36px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.10);
  padding: 0;
}

.iconBtn.iconBtnSettings:active{
  transform: translateY(1px);
}

/* Панель действий отдельно */
.gameActionBar{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

/* Пилюли-кнопки компактнее */
.btnPill{
  border-radius: 999px;
  padding: 10px 12px;
}

/* Мой статус отдельной строкой */
.myRsvpLine{
  display: flex;
}

.badge.chipMy{
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
}

.gameHero{
  padding: 12px;
  border-radius: 16px;
  border: 1px solid rgba(127,127,127,0.22);
  background: var(--tg-theme-secondary-bg-color, rgba(255,255,255,0.06));
  color: var(--tg-theme-text-color, #eaeaea);
  display: grid;
  gap: 10px;
}

.gameHero__top{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.gameHero__when{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
}

.gameHero__whenIcon{ opacity: 0.9; }

.gameHero__settings{
  width: 36px;
  height: 36px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  padding: 0;
  background: rgba(127,127,127,0.12);
  border: 1px solid rgba(127,127,127,0.22);
}

.gameHero__mid{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: center;
}

.gameHero__where{
  min-width: 0;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.gameHero__whereIcon{ opacity: 0.9; }

.gameHero__whereText{
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  opacity: 0.95;
}

.gameHero__status{
  justify-self: end;
  padding: 7px 10px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 13px;
  line-height: 1;
  border: 1px solid rgba(127,127,127,0.22);
  background: rgba(127,127,127,0.12);
}

.gameHero__actions{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.gameHero__actionBtn{
  border-radius: 14px;
  padding: 12px 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

/* На очень узких экранах — в столбик */
@media (max-width: 360px){
  .gameHero__actions{ grid-template-columns: 1fr; }
}

.gameHero__my{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  padding-top: 8px;
  border-top: 1px solid rgba(127,127,127,0.18);
}

.gameHero__myLabel{
  opacity: 0.7;
  font-size: 12px;
}

.gameHero__myValue{
  font-weight: 800;
  font-size: 13px;
}


.gameNoticeInline{
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255, 193, 7, .35);
  background: rgba(255, 193, 7, .14);
  color: #fff;
  display: flex;
  gap: 8px;
  align-items: flex-start;
}

.gameNoticeInline__icon{ margin-top: 1px; }

.gameNoticeInline__text{
  flex: 1;
  font-size: 13px;
  line-height: 1.25;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.gameNoticeInline__edit{
  margin-left: auto;
  opacity: .85;
}

.gameNoticeBlock{
  margin-top: 10px;
  padding: 12px;
  border-radius: 16px;
  border: 1px solid rgba(255, 193, 7, .35);
  background: rgba(255, 193, 7, .14);
  display: flex;
  gap: 10px;
  align-items: flex-start;
  color: var(--tg-theme-text-color, #111);
}

.gameNoticeBlock__title{
  font-weight: 700;
  font-size: 13px;
  margin-bottom: 2px;
}

.gameNoticeBlock__text{
  font-size: 13px;
  line-height: 1.3;
  opacity: .95;
}


.commentCard{
  border: 1px solid var(--border);
  background: var(--card-bg);
  border-radius: 16px;
  padding: 12px;
}

.commentTop{ display:flex; gap:10px; align-items:flex-start; }
.commentMain{ flex:1; min-width: 0; }

.avatarCircle{
  width: 38px; height: 38px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--tg-text) 6%, transparent);
  display:flex; align-items:center; justify-content:center;
  overflow:hidden;
  flex: 0 0 auto;
}
.avatarCircle img{ width:100%; height:100%; object-fit:cover; display:block; }
.avatarCircle span{ font-weight: 900; font-size: 12px; opacity: .9; }

.commentHead{
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items: baseline;
}
.commentAuthor{ font-weight: 900; }
.commentMeta{ opacity:.7; font-size: 12px; }

.commentBody{
  margin-top: 6px;
  white-space: pre-wrap;
  font-size: 13px;
  line-height: 1.35;
  opacity: .95;
}

.commentActions{
  margin-top: 10px;
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap: wrap;
}

.reactChip{
  border: 1px solid var(--border);
  background: transparent;
  border-radius: 999px;
  padding: 6px 10px;
  cursor: pointer;
  display:flex;
  gap:6px;
  align-items:center;
  line-height:1;
}
.reactChip.on{
  box-shadow: inset 0 0 0 999px color-mix(in srgb, #22c55e 14%, transparent);
}
.reactChip.add{ opacity: .85; }


.cmtRow{
  display:flex;
  gap:10px;
  align-items:flex-end;
  margin-top:10px;
}

.cmtRow.mine{
  justify-content:flex-end;
}

.cmtAvatar{
  flex: 0 0 auto;
}

.cmtBubble{
  max-width: min(520px, 78%);
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card-bg) 92%, black);
  border-radius: 18px;
  padding: 10px 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,.16);
}

.cmtRow.mine .cmtBubble{
  background: color-mix(in srgb, #16a34a 12%, var(--card-bg));
  border-color: color-mix(in srgb, #16a34a 30%, var(--border));
}

.cmtHead{
  display:flex;
  gap:10px;
  align-items:baseline;
  justify-content:space-between;
  margin-bottom: 6px;
}

.cmtAuthor{
  font-weight: 900;
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.cmtMeta{
  font-size: 12px;
  opacity: .75;
  flex: 0 0 auto;
}

.cmtText{
  white-space: pre-wrap;
  line-height: 1.35;
}

.cmtActions{
  display:flex;
  gap:8px;
  align-items:center;
  margin-top: 8px;
  flex-wrap: wrap;
}

/* чуть “легче” иконки в чате */
.cmtActions .iconBtn{
  border-radius: 12px;
  padding: 6px 8px;
  opacity: .9;
}
.cmtBubble{ position: relative; }

/* хвостик слева */
.cmtRow:not(.mine) .cmtBubble::after{
  content:"";
  position:absolute;
  left:-6px;
  bottom:12px;
  width:12px;
  height:12px;
  background: inherit;
  transform: rotate(45deg);
  border-left:1px solid var(--border);
  border-bottom:1px solid var(--border);
  border-bottom-left-radius: 3px;
}

/* хвостик справа */
.cmtRow.mine .cmtBubble::after{
  content:"";
  position:absolute;
  right:-6px;
  bottom:12px;
  width:12px;
  height:12px;
  background: inherit;
  transform: rotate(45deg);
  border-right:1px solid var(--border);
  border-top:1px solid var(--border);
  border-top-right-radius: 3px;
}

/* Резерв места под аватар, чтобы пузыри не прыгали */
.cmtAvatar{ width: 38px; }
.cmtAvatar.ghost{
  opacity: 0;
  pointer-events: none;
}

/* плотнее между сообщениями одного автора */
.cmtRow.contPrev{ margin-top: 4px; }

/* хвостик только у последнего сообщения в группе */
.cmtRow .cmtBubble::after{ display: none; }
.cmtRow.tail:not(.mine) .cmtBubble::after{ display: block; }
.cmtRow.tail.mine .cmtBubble::after{ display: block; }

/* “склейка” пузырей в группе */
.cmtRow.contPrev:not(.mine) .cmtBubble{ border-top-left-radius: 10px; }
.cmtRow.contNext:not(.mine) .cmtBubble{ border-bottom-left-radius: 10px; }

.cmtRow.contPrev.mine .cmtBubble{ border-top-right-radius: 10px; }
.cmtRow.contNext.mine .cmtBubble{ border-bottom-right-radius: 10px; }

/* мета когда скрыли заголовок */
.cmtMetaOnly{
  font-size: 12px;
  opacity: .75;
  text-align: right;
  margin-bottom: 6px;
}



.commentComposer{
  display:flex;
  gap:10px;
  align-items:flex-end;
  padding:10px;
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--card-bg) 92%, black);
  border-radius: 16px;
}

.commentComposer__input{
  flex:1;
  border:0;
  outline:0;
  background: transparent;
  color: var(--tg-text);
  font-size: 14px;
  line-height: 1.35;
  resize: none;
  padding: 8px 10px;
  min-height: 38px;
  max-height: 140px;
  overflow:auto;
}

.commentComposer__send{
  width:42px;
  height:42px;
  border-radius: 14px;
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--tg-text) 10%, transparent);
  cursor:pointer;
  font-weight: 900;
  line-height: 1;
}

.commentComposer__send:disabled{
  opacity:.5;
  cursor:not-allowed;
}

.commentEditBar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  margin-top:10px;
  padding:10px 12px;
  border:1px dashed color-mix(in srgb, var(--border) 70%, transparent);
  border-radius: 14px;
  opacity:.95;
}

.cmtRow.pending { opacity: .7; }
.cmtRow.flash .cmtBubble { animation: cmtFlash .9s ease; }
@keyframes cmtFlash {
  0%   { box-shadow: 0 0 0 0 rgba(34,197,94,.0); }
  30%  { box-shadow: 0 0 0 3px rgba(34,197,94,.35); }
  100% { box-shadow: 0 0 0 0 rgba(34,197,94,.0); }
}

.cmtRow.pinned .cmtBubble {
  box-shadow: 0 0 0 2px rgba(250, 204, 21, .25);
}
.cmtPinTag{
  font-size: 11px;
  opacity: .85;
  margin-left: 8px;
}

/* ===== REACTIONS (Telegram adaptive) ===== */

.reactOverlay{
  position: fixed;
  inset: 0;
  z-index: 9999;

  display:flex;
  align-items:flex-end;
  justify-content:center;
  padding: 14px;

  /* мягкий оверлей (не закрывает полностью) */
  background: color-mix(in srgb, var(--tg-text) 18%, transparent);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* модалка как bottom sheet */
.reactModal{
  width: min(520px, 100%);
  max-height: min(86vh, 720px);
  overflow: hidden;

  color: var(--tg-text);
  background: var(--card-bg);

  border-radius: calc(var(--r-lg) + 4px);
  border: 1px solid var(--border);
  box-shadow: 0 18px 60px rgba(0,0,0,0.22);

  transform: translateY(8px);
  animation: reactModalIn .18s ease-out forwards;
}

@keyframes reactModalIn {
  to { transform: translateY(0); }
}

.reactWhoBlock{
  padding: 14px 14px 10px;
}

.reactWhoTitle{
  font-weight: 900;
  font-size: var(--fs-h2);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  margin-bottom: 10px;
}

/* крестик всегда контрастный */
.reactCloseBtn{
  width: 34px;
  height: 34px;
  border-radius: 999px;

  display:flex;
  align-items:center;
  justify-content:center;

  color: var(--tg-text);
  background: var(--muted-bg);
  border: 1px solid var(--border);

  cursor: pointer;
}

.reactCloseBtn:hover{
  background: color-mix(in srgb, var(--tg-text) 10%, transparent);
}

.reactCloseBtn:active{
  transform: scale(0.96);
}

/* lock block */
.reactLock{
  padding: 12px;
  border-radius: var(--r-lg);
  background: var(--muted-bg);
  border: 1px solid var(--border);
}

.reactWhoList{
  display: grid;
  gap: 8px;
  max-height: 220px;
  overflow: auto;
  padding: 10px;

  border-radius: var(--r-lg);
  background: color-mix(in srgb, var(--tg-text) 5%, transparent);
  border: 1px solid var(--border);
}

/* аккуратный скролл */
.reactWhoList::-webkit-scrollbar{ width: 8px; }
.reactWhoList::-webkit-scrollbar-thumb{
  background: color-mix(in srgb, var(--tg-text) 18%, transparent);
  border-radius: 10px;
}
.reactWhoList::-webkit-scrollbar-track{ background: transparent; }

.reactWhoRow{
  display:flex;
  align-items:center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: var(--r-lg);

  background: color-mix(in srgb, var(--tg-text) 4%, transparent);
  border: 1px solid color-mix(in srgb, var(--tg-text) 10%, transparent);
}

/* имя приоритетнее — не даём реакциям "съесть" ширину */
.reactWhoName{
  font-weight: 850;
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* реакции справа компактно: перекрытие на 50% */
.reactEmojiStack{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  flex: 0 0 auto;
  max-width: 42%;
}

.reactEmoji{
  width: 28px;
  height: 28px;
  border-radius: 999px;

  display:flex;
  align-items:center;
  justify-content:center;

  background: var(--tg-bg);
  border: 1px solid var(--border);

  font-size: 16px;
  line-height: 1;

  margin-left: -12px; /* перекрытие ~ половина */
}

.reactEmoji:first-child{ margin-left: 0; }

/* разделитель */
.reactDivider{
  height: 1px;
  margin: 10px 0 0;
  background: linear-gradient(
    to right,
    transparent,
    color-mix(in srgb, var(--tg-text) 18%, transparent),
    transparent
  );
}

/* нижний блок выбора реакций — как в TG (круглые) */
.reactGrid{
  padding: 12px 14px 10px;
  display:flex;
  flex-wrap: wrap;
  gap: 10px;
}

.reactPickBtn{
  width: 44px;
  height: 44px;
  border-radius: 999px;

  border: 1px solid var(--border);
  background: var(--muted-bg);
  color: var(--tg-text);

  display:flex;
  align-items:center;
  justify-content:center;

  font-size: 22px;
  cursor: pointer;

  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}

.reactPickBtn:hover{
  background: color-mix(in srgb, var(--tg-text) 10%, transparent);
  border-color: color-mix(in srgb, var(--tg-text) 18%, transparent);
}

.reactPickBtn:active{
  transform: scale(0.94);
}

.gsToast{
  position: sticky;
  top: 0;
  z-index: 20;
  margin: -12px -12px 12px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 86%, black);
  font-weight: 800;
}
.gsToast.ok{
  box-shadow: inset 0 0 0 999px color-mix(in srgb, #16a34a 14%, transparent);
}
.gsToast.warn{
  box-shadow: inset 0 0 0 999px color-mix(in srgb, #f59e0b 14%, transparent);
}
.gsToast.err{
  box-shadow: inset 0 0 0 999px color-mix(in srgb, #ef4444 14%, transparent);
}


/* ===== Jersey UI (scoped) ===== */
.jerseyCard {
  padding: 14px;
  border-radius: 18px;
  background: color-mix(in srgb, var(--tg-bg) 92%, var(--tg-text) 4%);
  border: 1px solid color-mix(in srgb, var(--tg-text) 10%, transparent);
  box-shadow: 0 12px 28px rgba(0,0,0,0.12);
}
.jerseyHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.jerseyTitle h2 {
  margin: 0;
  line-height: 1.2;
  font-size: 18px;
  letter-spacing: -0.2px;
}
.jerseyTitle .jerseySub {
  margin-top: 6px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

.badge.badge--ok { border: 1px solid rgba(46, 204, 113, 0.35); }
.badge.badge--off { border: 1px solid rgba(231, 76, 60, 0.35); }

.jerseyActions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: flex-end;
}
.jerseyActions .btn {
  flex: 1 1 140px;
  min-width: 140px;
}

/* 2 колонки на широких, на мобиле — стек */
.jerseyBody {
  display: grid;
  gap: 12px;
}
@media (min-width: 860px) {
  .jerseyBody {
    align-items: start;
  }
}

/* Секции */
.jerseySection {
  padding: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 14px;
  background: rgba(255,255,255,0.03);
}
.jerseySectionHead {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}
.jerseySectionHead h3 {
  margin: 0;
  font-size: 15px;
  letter-spacing: -0.1px;
}

/* Список заявок */
.jerseyReqGrid {
  display: grid;
  gap: 8px;
}
.jerseyReqItem {
  width: 100%;
  text-align: left;
  cursor: pointer;
  border-radius: 14px;
  padding: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.02);
  transition: transform .06s ease, border-color .12s ease, background .12s ease;
}
.jerseyReqItem:active { transform: scale(0.99); }
.jerseyReqItem:hover { border-color: rgba(255,255,255,0.22); }
.jerseyReqItem.isActive {
  border-color: rgba(255,255,255,0.38);
  background: rgba(255,255,255,0.04);
}

.jerseyReqTop {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}
.jerseyReqTop .left {
  font-weight: 800;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.jerseyReqTop .right {
  opacity: 0.75;
  white-space: nowrap;
}

.jerseyReqText {
  margin-top: 6px;
  opacity: 0.92;
  font-size: 13px;
  line-height: 1.35;
}
.jerseyReqText b { font-weight: 800; }

/* Форма */
.jerseyForm {
  display: grid;
  gap: 10px;
}
.field { display: grid; gap: 6px; }
.field label { font-size: 13px; opacity: 0.9; }

.form2 {
  display: grid;
  gap: 10px;
  grid-template-columns: 1fr;
}
@media (min-width: 420px) {
  .form2 { grid-template-columns: 1fr 1fr; }
}

/* Пиллы: делаем аккуратнее, но только внутри jersey */
.jerseyCard .pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.03);
  user-select: none;
}
.jerseyCard .pill input { margin: 0; }

.pillGroup {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* Кнопки формы */
.jerseyBtnRow {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.jerseyBtnRow .btn { flex: 1 1 150px; }

.jerseyHint { opacity: 0.82; margin-top: 8px; }

.jerseyNotice {
  margin: 10px 0 8px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.03);
}

/* History */
.jerseyHistory summary { cursor: pointer; }
.jerseyHistoryGrid { display: grid; gap: 10px; margin-top: 10px; }
/* ===== jersey color buttons ===== */
.colorBtns {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.colorBtn {
  appearance: none;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.03);
  color: inherit;
  padding: 10px 12px;
  border-radius: 12px;
  font-weight: 800;
  font-size: 13px;
  line-height: 1;
  cursor: pointer;
  transition: transform .06s ease, border-color .12s ease, background .12s ease, opacity .12s ease;
  user-select: none;
  min-width: 92px; /* чтобы кнопки были одинаковые */
}

.colorBtn:active { transform: scale(0.98); }
.colorBtn:hover { border-color: rgba(255,255,255,0.24); }

.colorBtn.isActive {
  border-color: rgba(255,255,255,0.42);
  background: rgba(255,255,255,0.12);
}

.colorBtn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

/* =========================
   Jersey UI: theme-safe colors
   (append to end of styles.css)
   ========================= */

/* Чуть подтянем контраст внутри jersey-блока в обеих темах */
.jerseyCard .jerseyNotice,
.jerseyCard .pill,
.jerseyCard .jerseyReqItem {
  border: 1px solid var(--border) !important;
  background: color-mix(in srgb, var(--tg-text) 5%, transparent) !important;
}

:root[data-tg="dark"] .jerseyCard .jerseyNotice,
:root[data-tg="dark"] .jerseyCard .pill,
:root[data-tg="dark"] .jerseyCard .jerseyReqItem {
  background: color-mix(in srgb, var(--tg-text) 9%, transparent) !important;
}

.jerseyCard .jerseyReqItem:hover {
  border-color: color-mix(in srgb, var(--tg-text) 28%, transparent) !important;
  background: color-mix(in srgb, var(--tg-text) 7%, transparent) !important;
}
:root[data-tg="dark"] .jerseyCard .jerseyReqItem:hover {
  background: color-mix(in srgb, var(--tg-text) 12%, transparent) !important;
}

.jerseyCard .jerseyReqItem.isActive {
  border-color: color-mix(in srgb, var(--tg-btn) 55%, var(--border)) !important;
  background: color-mix(in srgb, var(--tg-btn) 12%, transparent) !important;
}

/* ===== Mobile-first polish for Telegram WebApp ===== */
@media (max-width: 680px) {
  .jerseyCard {
    padding: 16px 14px;
    border-radius: 20px;
    box-shadow: 0 12px 24px rgba(0,0,0,0.14);
  }

  .jerseyHeader {
    flex-direction: column;
    gap: 10px;
  }

  .jerseyTitle h2 {
    font-size: 20px;
    letter-spacing: -0.3px;
  }

  .jerseyActions {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
  }

  .jerseyActions .btn {
    min-width: 0;
    padding: 10px 12px;
  }

  .jerseySection {
    border-radius: 16px;
    padding: 12px;
    background: color-mix(in srgb, var(--tg-bg) 88%, var(--tg-text) 6%);
    border: 1px solid color-mix(in srgb, var(--tg-text) 10%, transparent);
  }

  .jerseyReqGrid {
    gap: 10px;
  }

  .jerseyReqItem {
    padding: 12px;
    border-radius: 16px;
    background: color-mix(in srgb, var(--tg-bg) 90%, var(--tg-text) 6%);
    border: 1px solid color-mix(in srgb, var(--tg-text) 12%, transparent);
    box-shadow: 0 8px 18px rgba(0,0,0,0.08);
  }

  .jerseyReqTop {
    align-items: center;
  }

  .jerseyReqTop .left {
    font-size: 13.5px;
  }

  .jerseyReqTop .right {
    font-size: 12px;
  }

  .jerseyReqText {
    font-size: 12.8px;
    line-height: 1.45;
  }

  .jerseyForm {
    gap: 12px;
  }

  .jerseyBtnRow {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
  }

  .jerseyBtnRow .btn {
    width: 100%;
    padding: 10px 12px;
  }
}

@media (max-width: 420px) {
  .jerseyActions {
    grid-template-columns: 1fr;
  }

  .jerseyBtnRow {
    grid-template-columns: 1fr;
  }
}

:root[data-tg="light"] .jerseyCard,
:root[data-theme="light"] .jerseyCard {
  box-shadow: 0 12px 20px rgba(0,0,0,0.08);
}

/* ===== Кнопки выбора цветов (вместо чекбоксов) ===== */
.colorBtns {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.colorBtn {
  width: 100%;
  min-width: 0;
  appearance: none;
  border: 1px solid var(--border) !important;
  background: color-mix(in srgb, var(--tg-text) 6%, transparent) !important;
  color: var(--tg-text);
  padding: 10px 10px;
  border-radius: 14px;
  font-weight: 900;
  font-size: 12.5px;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  cursor: pointer;
  user-select: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: transform .06s ease, border-color .12s ease, background .12s ease, filter .12s ease;
}

:root[data-tg="dark"] .colorBtn {
  background: color-mix(in srgb, var(--tg-text) 11%, transparent) !important;
}

.colorBtn:hover {
  border-color: color-mix(in srgb, var(--tg-text) 30%, transparent) !important;
}

.colorBtn:active { transform: scale(0.985); }

.colorBtn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--tg-btn) 20%, transparent);
}

.colorBtn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

/* кружок-индикатор */
.colorBtn .colorDot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: var(--chip, #999);
  border: 1px solid color-mix(in srgb, var(--tg-text) 22%, transparent);
}

/* базовые цвета */
.colorBtn.c-white { --chip: #ffffff; --chipText: #111111; }
.colorBtn.c-blue  { --chip: #2563eb; --chipText: #ffffff; }
.colorBtn.c-black { --chip: #111827; --chipText: #ffffff; }

/* активное состояние — НЕ tg-btn (иначе все выбранные одинаково синие) */
.colorBtn.isActive {
  background: var(--chip) !important;
  color: var(--chipText) !important;
  border-color: color-mix(in srgb, var(--chip) 70%, var(--border)) !important;
  filter: saturate(1.05);
  box-shadow: 0 10px 18px rgba(0,0,0,0.10);
}

/* чтобы белая кнопка не пропадала на светлом фоне */
.colorBtn.isActive.c-white {
  box-shadow:
    inset 0 0 0 1px color-mix(in srgb, #000 18%, transparent),
    0 10px 18px rgba(0,0,0,0.10);
}


/* ===== Avatar (theme-safe) ===== */
.avatar {
  width: var(--av-size, 52px);
  height: var(--av-size, 52px);
  border-radius: 999px;
  overflow: hidden;
  display: grid;
  place-items: center;
  flex: 0 0 auto;

  /* рамка и фон работают и в light, и в dark */
  border: 1px solid color-mix(in srgb, var(--tg-text) 18%, transparent);
  background:
    radial-gradient(circle at 30% 25%, color-mix(in srgb, var(--tg-text) 14%, transparent), transparent 55%),
    color-mix(in srgb, var(--tg-text) 6%, transparent);

  box-shadow: 0 10px 24px rgba(0,0,0,0.18);
  backdrop-filter: blur(8px);
}

:root[data-tg="light"] .avatar,
:root[data-theme="light"] .avatar {
  box-shadow: 0 10px 18px rgba(0,0,0,0.12);
}

.avatar.isClickable { cursor: zoom-in; }

.avatarImg {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  user-select: none;
  -webkit-user-drag: none;
}

/* если вдруг не загрузилась и заглушка — буква будет читабельной */
.avatarLetter {
  font-weight: 900;
  color: var(--tg-text);
  opacity: 0.8;
  text-shadow: 0 2px 10px rgba(0,0,0,.20);
}


/* ---------------------------
   WEB theme bar (only web)
--------------------------- */

.webThemeBar {
  position: sticky;
  top: 0;
  z-index: 50;

  padding: 10px 12px;
  padding-top: max(10px, env(safe-area-inset-top));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  background: color-mix(in srgb, var(--tg-theme-bg-color, #fff) 86%, transparent);
  border-bottom: 1px solid color-mix(in srgb, var(--tg-theme-hint-color, #999) 22%, transparent);
}

.webThemeBar__inner {
  max-width: 520px;
  margin: 0 auto;

  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.webThemeBar__title {
  font-weight: 800;
  letter-spacing: 0.2px;
  opacity: 0.92;
}

/* ---------------------------
   Switch (sun <-> moon)
--------------------------- */

.themeSwitch {
  --sw-w: 78px;
  --sw-h: 34px;
  --sw-pad: 2px;

  appearance: none;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;

  border-radius: 999px;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.themeSwitch__track {
  position: relative;
  display: block;
  width: var(--sw-w);
  height: var(--sw-h);

  border-radius: 999px;
  background: var(--tg-theme-secondary-bg-color, rgba(0,0,0,0.06));
  border: 1px solid color-mix(in srgb, var(--tg-theme-hint-color, #999) 25%, transparent);

  box-shadow:
    0 1px 0 color-mix(in srgb, var(--tg-theme-bg-color, #fff) 40%, transparent) inset,
    0 8px 22px color-mix(in srgb, #000 12%, transparent);

  overflow: hidden;
}

/* icons on the sides */
.themeSwitch__icon {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 14px;
  opacity: 0.65;
  pointer-events: none;
}

.themeSwitch__icon--sun { left: 10px; }
.themeSwitch__icon--moon { right: 10px; }

/* moving thumb */
.themeSwitch__thumb {
  position: absolute;
  top: var(--sw-pad);
  left: var(--sw-pad);

  width: calc(var(--sw-h) - var(--sw-pad) * 2);
  height: calc(var(--sw-h) - var(--sw-pad) * 2);
  border-radius: 999px;

  background: var(--tg-theme-bg-color, #fff);
  box-shadow:
    0 10px 20px color-mix(in srgb, #000 18%, transparent),
    0 1px 0 color-mix(in srgb, #fff 55%, transparent) inset;

  display: flex;
  align-items: center;
  justify-content: center;

  transform: translateX(0);
  transition: transform 260ms cubic-bezier(.2,.9,.2,1), background-color 260ms ease, box-shadow 260ms ease;
}

.themeSwitch__thumbIcon {
  font-size: 14px;
  opacity: 0.9;
  transition: opacity 200ms ease, transform 260ms cubic-bezier(.2,.9,.2,1);
}

/* dark -> thumb goes right */
.themeSwitch.is-dark .themeSwitch__thumb {
  transform: translateX(calc(var(--sw-w) - var(--sw-h)));
}

/* subtle "active" feeling */
.themeSwitch:active .themeSwitch__thumb {
  box-shadow:
    0 8px 16px color-mix(in srgb, #000 22%, transparent),
    0 1px 0 color-mix(in srgb, #fff 55%, transparent) inset;
}

.themeSwitch:focus-visible .themeSwitch__track {
  outline: 2px solid color-mix(in srgb, var(--tg-theme-button-color, #2ea6ff) 55%, transparent);
  outline-offset: 3px;
}

/* reduce motion */
@media (prefers-reduced-motion: reduce) {
  .themeSwitch__thumb,
  .themeSwitch__thumbIcon {
    transition: none !important;
  }
}

/* ---------------------------
   WEB theme dock (top-right)
--------------------------- */

.webThemeDock {
  position: fixed;
  top: calc(5px + env(safe-area-inset-top));
  right: -10px;               /* чуть “выпирает” за край */
  z-index: 100000;            /* выше тостов (у них 99999) */
  pointer-events: none;       /* клики только по панели */
}

.webThemeDock__panel {
  pointer-events: auto;

  display: flex;
  align-items: center;

  padding: 8px 14px 8px 12px;
  border-radius: 999px 0 0 999px;

  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  background: color-mix(in srgb, var(--tg-theme-bg-color, #fff) 84%, transparent);
  border: 1px solid color-mix(in srgb, var(--tg-theme-hint-color, #999) 22%, transparent);

  box-shadow:
    0 10px 28px color-mix(in srgb, #000 14%, transparent);
}

/* компактный размер тумблера для правого “дока” */
.themeSwitch--compact {
  --sw-w: 70px;
  --sw-h: 32px;
  --sw-pad: 2px;
}

/* чуть меньше иконки внутри бегунка */
.themeSwitch--compact .themeSwitch__thumbIcon {
  font-size: 13px;
}

/* ===== AdminPanel / Games (mobile polish) ===== */
.adminGamesSection{
  margin-top: 12px;
  display: grid;
  gap: 12px;
}

.adminGamesCard{
  border: 1px solid color-mix(in srgb, var(--tg-text) 12%, transparent);
  border-radius: 16px;
}

.adminGamesCard--auto{
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--tg-btn) 7%, var(--card-bg)) 0%,
    var(--card-bg) 100%
  );
}

.adminGamesHint{
  opacity: 0.88;
  line-height: 1.35;
  margin-bottom: 12px;
}

.adminGamesForm2{
  margin-bottom: 10px;
}

.adminToggleRow{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 12px;
  padding: 10px 12px;
  border-radius: 12px;
  background: color-mix(in srgb, var(--tg-text) 4%, transparent);
  border: 1px solid color-mix(in srgb, var(--tg-text) 10%, transparent);
}

.adminToggleLabel{
  font-weight: 700;
  color: var(--tg-text);
}

.adminSwitch{
  position: relative;
  width: 52px;
  height: 30px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--tg-text) 20%, transparent);
  background: color-mix(in srgb, var(--tg-text) 14%, transparent);
  cursor: pointer;
  transition: all .18s ease;
  padding: 0;
  flex: 0 0 auto;
}

.adminSwitch__thumb{
  position: absolute;
  top: 3px;
  left: 3px;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 2px 8px rgba(0,0,0,.25);
  transition: transform .18s ease;
}

.adminSwitch.isOn{
  background: var(--tg-btn);
  border-color: color-mix(in srgb, var(--tg-btn) 68%, transparent);
}
.adminSwitch.isOn .adminSwitch__thumb{
  transform: translateX(22px);
}

.adminCoordRow,
.adminActionRow,
.adminCreateRow{
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
}

.adminActionRow,
.adminCreateRow{
  margin-top: 10px;
}

.adminDateTimeRow{
  padding-right: 0 !important;
}

.adminGamesSection .input,
.adminGamesSection select,
.adminGamesSection input{
  min-height: 44px;
  border-radius: 12px;
  border-color: color-mix(in srgb, var(--tg-text) 16%, transparent);
  background: color-mix(in srgb, var(--card-bg) 94%, transparent);
}

.adminGamesSection .input:focus,
.adminGamesSection select:focus,
.adminGamesSection input:focus{
  border-color: color-mix(in srgb, var(--tg-btn) 62%, transparent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--tg-btn) 20%, transparent);
}

@media (min-width: 560px){
  .adminCoordRow,
  .adminActionRow,
  .adminCreateRow{
    grid-template-columns: repeat(2, minmax(0, 1fr));
    align-items: end;
  }
  .adminCreateRow > :first-child{ max-width: 180px; }
}

@media (max-width: 430px){
  .adminGamesSection .btn{
    width: 100%;
  }
}
